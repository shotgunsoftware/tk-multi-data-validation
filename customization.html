

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customizing the Validation &mdash; tk-multi-data-validation v0.2.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="App Config Settings" href="settings.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href='https://help.autodesk.com/view/SGDEV/ENU/'>
    
        <img style='width: 191px;
                height: 60px;
                margin: 2px;
                border-radius: 0px;
                padding: 0px;'
            src='_static/logo@2x.png'/>
    
    </a>
    

          
          
          <a href="index.html" class="icon icon-home">
            tk-multi-data-validation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="using_the_app.html">Using the Data Validation App</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Customizing the Validation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adding-a-new-rule">Adding a New Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#removing-a-rule">Removing a Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-an-existing-rule">Modifying an Existing Rule</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">App Config Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>


    <a href='genindex.html'>Alphabetic Index</a>

    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px;
                color: #b3b3b3;
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>
    <style>
        a.custom_post_menu { display: inline;
                             padding: 0px;
                             text-decoration: underline; }
    </style>

    <b>tk-multi-data-validation</b> v0.2.0.<br>
    
        This documentation is part of the Flow Production Tracking.
    
    For more information, please visit
    <a class=custom_post_menu href='https://help.autodesk.com/view/SGDEV/ENU/'>The Flow Production Tracking developer portal.</a>.
    The code associated with this documentation can be found
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/tk-multi-data-validation'>here</a>.

    </div>
    <style>
        p.privacy_links { margin: 4px 0px;}
    </style>
    <p class="privacy_links"><a data-opt-in-preferences href="javascript:;">Privacy settings</a></p>
    <p class="privacy_links"><a data-wat-linkname="manage-ccpa-settings-footer-link" href="javascript:;">Do not sell my personal information</a></p>
    <p class="privacy_links"><a href="https://www.autodesk.com/company/legal-notices-trademarks/privacy-statement">Privacy/Cookies</a></p>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tk-multi-data-validation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Customizing the Validation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="customizing-the-validation">
<span id="validation-customization"></span><h1>Customizing the Validation<a class="headerlink" href="#customizing-the-validation" title="Permalink to this heading"></a></h1>
<p>Before customizing the Data Validation App (DVA), it is assumed that the Engine hook has been set up as described <a class="reference internal" href="getting_started.html#engine-setup-hook"><span class="std std-ref">here</span></a>.</p>
<p>To further customize the data validation for an Engine, we need to override the Engine hook:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Data Validation App config settings file (tk-multi-data-validation.yml)</span><a class="headerlink" href="#id1" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings.tk-multi-data-validation.vred</span><span class="p">:</span>
<span class="w">  </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@apps.tk-multi-data-validation.location&quot;</span>
<span class="w">  </span><span class="nt">hook_data_validation</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{engine}/tk-multi-data-validation/basic/data_validation.py:{config}/tk-multi-data-validation/my_custom_vred_data_validation.py&quot;</span>
</pre></div>
</div>
</div>
<p>Notice that another hook file is appended to <code class="docutils literal notranslate"><span class="pre">hook_data_validation</span></code>. This is our custom hook file where we will add our modifications. The <code class="docutils literal notranslate"><span class="pre">my_custom_vred_data_validation.py</span></code> hook file is stored in your configuration hooks folder, for example: <code class="docutils literal notranslate"><span class="pre">tk-config-default2/hooks/tk-multi-data-validation/my_custom_vred_data_validation.py</span></code>. Let’s start implementing the custom hook:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example: my_custom_data_validation.py hook file</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="kn">import</span> <span class="nn">sgtk</span>
    <span class="n">HookBaseClass</span> <span class="o">=</span> <span class="n">sgtk</span><span class="o">.</span><span class="n">get_hook_baseclass</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">MyCustomVREDDataValidationHook</span><span class="p">(</span><span class="n">HookBaseClass</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subclass the VRED Engine hook class VREDDataValidationHook.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">get_validation_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Override the VRED Engine hook method to modify the Validation Rule Set.&quot;&quot;&quot;</span>

            <span class="c1"># This will call the base VRED Engine hook to get the default rule set</span>
            <span class="n">vred_rule_set</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyCustomVREDDataValidationHook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_validation_data</span><span class="p">()</span>

            <span class="c1"># Modify the rule set as desired. Examples will be provided later on.</span>

            <span class="c1"># Return the modified rule set</span>
            <span class="k">return</span> <span class="n">vred_rule_set</span>
</pre></div>
</div>
</div>
<section id="adding-a-new-rule">
<span id="customize-new-rule"></span><h2>Adding a New Rule<a class="headerlink" href="#adding-a-new-rule" title="Permalink to this heading"></a></h2>
<p>Now that the custom hook has been set up, we can add new <a class="reference internal" href="glossary.html#validation-rule-item"><span class="std std-ref">Validation Rule</span></a> to the default set of rules. To add a new rule, we will modify the <a class="reference internal" href="glossary.html#validation-rule-set"><span class="std std-ref">Validation Rule Set</span></a> dictionary returned by the VRED Engine hook:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Example: Adding a new rule in my_custom_data_validation.py</span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">get_validation_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Override the VRED Engine hook method to tweak the VRED Validation Rule Set.&quot;&quot;&quot;</span>

        <span class="n">vred_rule_set</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyCustomVREDDataValidationHook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_validation_data</span><span class="p">()</span>

        <span class="c1"># Create a simple new rule</span>
        <span class="n">my_new_rule</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My New Rule&quot;</span><span class="p">,</span>
            <span class="s2">&quot;check_func&quot;</span><span class="p">:</span> <span class="n">my_new_rule_check</span><span class="p">,</span>
            <span class="s2">&quot;fix_func&quot;</span><span class="p">:</span> <span class="n">my_new_fix_rule</span>
        <span class="p">}</span>

        <span class="c1"># Add the new rule to the set, using rule id ``my_new_rule``</span>
        <span class="n">vred_rule_set</span><span class="p">[</span><span class="s2">&quot;my_new_rule&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_new_rule</span>

        <span class="k">return</span> <span class="n">vred_rule_set</span>

    <span class="k">def</span> <span class="nf">my_new_rule_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement the new rule check function here.&quot;&quot;&quot;</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">my_new_rule_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;&quot;&quot;Implement the new rule fix function here.&quot;</span>
</pre></div>
</div>
</div>
<p>The new rule has been added to the validation rule set, and now the DVA has access to it. To tell the DVA to show the new rule in the GUI, we need to add it to the app config:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Example: Update the app config tk-multi-data-validation.yml to show the new rule</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings.tk-multi-data-validation.vred</span><span class="p">:</span>
<span class="w">  </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@apps.tk-multi-data-validation.location&quot;</span>
<span class="w">  </span><span class="nt">hook_data_validation</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{engine}/tk-multi-data-validation/basic/data_validation.py:{config}/tk-multi-data-validation/my_custom_vred_data_validation.py&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delete_hidden_nodes</span><span class="w"> </span><span class="c1"># a default rule</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_new_rule</span><span class="w">         </span><span class="c1"># your custom rule</span>
</pre></div>
</div>
</div>
</section>
<section id="removing-a-rule">
<span id="customize-remove-rule"></span><h2>Removing a Rule<a class="headerlink" href="#removing-a-rule" title="Permalink to this heading"></a></h2>
<p>A <a class="reference internal" href="glossary.html#validation-rule-item"><span class="std std-ref">Validation Rule</span></a> can be removed by deleting rule dictionary items from the <a class="reference internal" href="glossary.html#validation-rule-set"><span class="std std-ref">Validation Rule Set</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Example: Removing the rule delete_hidden_nodes</span><a class="headerlink" href="#id5" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">get_validation_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Override the VRED Engine hook method to tweak the VRED Validation Rule Set.&quot;&quot;&quot;</span>

        <span class="n">vred_rule_set</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyCustomVREDDataValidationHook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_validation_data</span><span class="p">()</span>

        <span class="c1"># Remove the rule with id &#39;delete_hidden_nodes&#39; by deleting the dict item</span>
        <span class="k">del</span> <span class="n">vred_rule_set</span><span class="p">[</span><span class="s2">&quot;delete_hidden_nodes&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">vred_rule_set</span>
</pre></div>
</div>
</div>
<p>Optionally, a rule can instead be removed by omitting the rule id in the <a class="reference internal" href="settings.html#data-validation-settings"><span class="std std-ref">App Config Settings</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Example: Remove delete_hidden_nodes rule using the config tk-multi-data-validation.yml</span><a class="headerlink" href="#id6" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings.tk-multi-data-validation.vred</span><span class="p">:</span>
<span class="w">  </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@apps.tk-multi-data-validation.location&quot;</span>
<span class="w">  </span><span class="nt">hook_data_validation</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{engine}/tk-multi-data-validation/basic/data_validation.py:{config}/tk-multi-data-validation/my_custom_vred_data_validation.py&quot;</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_new_rule</span><span class="w">         </span><span class="c1"># your custom rule</span>
</pre></div>
</div>
</div>
</section>
<section id="modifying-an-existing-rule">
<span id="customize-modify-rule"></span><h2>Modifying an Existing Rule<a class="headerlink" href="#modifying-an-existing-rule" title="Permalink to this heading"></a></h2>
<p>An exisiting <a class="reference internal" href="glossary.html#validation-rule-item"><span class="std std-ref">Validation Rule</span></a> can be modified by updating the <a class="reference internal" href="glossary.html#validation-rule-set"><span class="std std-ref">Validation Rule Set</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Modify rule <code class="docutils literal notranslate"><span class="pre">delete_hidden_nodes</span></code></span><a class="headerlink" href="#id7" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">get_validation_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Override the VRED Engine hook method to tweak the VRED Validation Rule Set.&quot;&quot;&quot;</span>

        <span class="n">vred_rule_set</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyCustomVREDDataValidationHook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_validation_data</span><span class="p">()</span>

        <span class="c1"># Update the ``delete_hidden_nodes`` rule name and error message</span>
        <span class="n">vred_rule_set</span><span class="p">[</span><span class="s2">&quot;delete_hidden_nodes&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Delete all the Nodes!!!&quot;</span>
        <span class="n">vred_rule_set</span><span class="p">[</span><span class="s2">&quot;delete_hidden_nodes&quot;</span><span class="p">][</span><span class="s2">&quot;error_msg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Oh no, we found an issue...&quot;</span>

        <span class="k">return</span> <span class="n">vred_rule_set</span>
</pre></div>
</div>
</div>
<p>If a callback function needs to be modified, the hook method can be overriden directly. For example, the VRED Engine hook defines the method <code class="docutils literal notranslate"><span class="pre">find_hidden_nodes</span></code> for tthe <code class="docutils literal notranslate"><span class="pre">delete_hidden_nodes</span></code> rule check function. To modify the check function, we can override the hook method:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">my_custom_data_validation.py hook file</span><a class="headerlink" href="#id8" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">class</span> <span class="nc">MyCustomVREDDataValidationHook</span><span class="p">(</span><span class="n">HookBaseClass</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subclass the VRED Engine hook class VREDDataValidationHook.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">find_hidden_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Override the VRED Engine hook method.</span>

<span class="sd">            Tweak this method to only find geometry nodes.</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="c1"># Call the base VRED Engine hook method to find all hidden nodes</span>
            <span class="n">nodes</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyCustomVREDDataValidationHook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">find_hidden_nodes</span><span class="p">()</span>

            <span class="c1"># Filter out the list of nodes to only include geometry nodes.</span>
            <span class="n">my_geometry_nodes</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">vrdGeometryNode</span><span class="p">):</span>
                    <span class="n">my_geometry_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

            <span class="c1"># Return the modified node list</span>
            <span class="k">return</span> <span class="n">my_geometry_nodes</span>
</pre></div>
</div>
</div>
<p>The rule’s fix, action and item action callback functions can be overridden the same was as shown above for the check function.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="settings.html" class="btn btn-neutral float-right" title="App Config Settings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Autodesk.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

  <script type="text/javascript">
    window.wafCCPAForceShow = true;
    (function(a,b,c,d){
      a='https://tags.tiqcdn.com/utag/autodesk/micro-basic/prod/utag.js';
      b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
      a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
    })();
  </script>


</body>
</html>